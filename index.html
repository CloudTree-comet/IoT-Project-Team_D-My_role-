<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minseok Lim - Hardware Architect</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #000;
            --secondary: #86868b;
            --accent: #2997ff;
            --bg: #000;
            --surface: #1c1c1e;
            --border: rgba(255, 255, 255, 0.1);
            --text: #f5f5f7;
            --code-bg: #1e1e1e;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* --- Hero Section --- */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            background: radial-gradient(circle at center, #1d1d1f 0%, #000 100%);
        }

        .hero-content h1 {
            font-size: clamp(3rem, 10vw, 6rem);
            font-weight: 700;
            letter-spacing: -0.04em;
            margin-bottom: 1rem;
            line-height: 1.1;
            background: linear-gradient(180deg, #fff 0%, #86868b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-content .subtitle {
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            font-weight: 400;
            color: var(--accent);
            margin-bottom: 2rem;
        }

        .hero-content .description {
            font-size: clamp(1rem, 2vw, 1.25rem);
            color: var(--secondary);
            max-width: 800px;
            margin: 0 auto;
            font-weight: 300;
        }

        .scroll-indicator {
            position: absolute; bottom: 3rem; left: 50%;
            transform: translateX(-50%); width: 24px; height: 40px;
            border: 2px solid var(--secondary); border-radius: 12px; opacity: 0.3;
        }
        .scroll-indicator::after {
            content: ''; position: absolute; top: 8px; left: 50%;
            transform: translateX(-50%); width: 4px; height: 8px;
            background: var(--secondary); border-radius: 2px;
            animation: scroll 2s infinite;
        }
        @keyframes scroll {
            0%, 100% { transform: translateX(-50%) translateY(0); opacity: 1; }
            50% { transform: translateX(-50%) translateY(10px); opacity: 0.3; }
        }

        /* --- Section Styling --- */
        section {
            padding: 140px 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .section-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: 1rem;
            text-align: center;
        }

        .section-subtitle {
            font-size: clamp(1.1rem, 2vw, 1.3rem);
            color: var(--secondary);
            text-align: center;
            margin-bottom: 80px;
            font-weight: 400;
        }

        /* --- Card Stack Architecture --- */
        .card-selector {
            display: flex; justify-content: center; gap: 1rem;
            flex-wrap: wrap; margin-bottom: 50px;
        }

        .card-selector button {
            padding: 0.8rem 1.8rem;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: 0.3s;
            color: var(--secondary);
        }

        .card-selector button.active {
            background: var(--accent);
            color: #fff;
            border-color: var(--accent);
        }

        .card-stack {
            position: relative; height: 520px;
            max-width: 900px; margin: 0 auto;
        }

        .architecture-card {
            position: absolute; width: 100%; top: 0;
            background: var(--surface);
            border-radius: 32px;
            padding: 60px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            border: 1px solid var(--border);
            transition: 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            pointer-events: none;
        }

        .architecture-card.active {
            opacity: 1; transform: translateY(0) scale(1);
            pointer-events: auto; z-index: 10;
        }

        .architecture-card h3 {
            font-size: 2.2rem; font-weight: 600;
            margin-bottom: 2rem; color: #fff;
        }

        .architecture-card ul { list-style: none; padding: 0; }
        .architecture-card li {
            padding: 1.2rem 0; padding-left: 2rem;
            color: var(--secondary); font-size: 1.15rem;
            position: relative; border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .architecture-card li::before {
            content: "•"; position: absolute; left: 0;
            color: var(--accent); font-weight: bold;
        }

        /* --- Hardware Design Section --- */
        .hardware-section { background: #050505; border-radius: 60px; margin: 40px 20px; }
        .hardware-grid {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 4rem; align-items: start;
        }
        .hardware-image-container { display: flex; flex-direction: column; gap: 30px; }
        .hardware-image {
            width: 100%; border-radius: 24px; border: 1px solid var(--border);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4); padding: 10px; background: #000;
        }

        .feature-item {
            margin-bottom: 2rem; padding: 2.5rem;
            background: #1c1c1e; border-radius: 24px;
            border-left: 4px solid var(--accent);
        }
        .feature-item h4 { font-size: 1.4rem; font-weight: 600; margin-bottom: 1rem; color: #fff; }
        .feature-item .label {
            display: inline-block; padding: 0.3rem 0.8rem;
            background: rgba(41, 151, 255, 0.1); color: var(--accent);
            border-radius: 6px; font-size: 0.75rem; font-weight: 700;
            text-transform: uppercase; margin-bottom: 1rem;
        }
        .feature-item p { color: var(--secondary); font-size: 1.05rem; line-height: 1.7; }

        /* --- Benefit Cards --- */
        .benefit-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .benefit-card {
            background: var(--surface); padding: 3rem; border-radius: 28px;
            border: 1px solid var(--border); transition: 0.3s;
        }
        .benefit-card h4 { font-size: 1.5rem; margin-bottom: 1rem; color: #fff; }
        .benefit-card .tag {
            display: inline-block; padding: 0.4rem 1rem;
            background: rgba(41, 151, 255, 0.1); color: var(--accent);
            border-radius: 8px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;
        }
        .benefit-card p { color: var(--secondary); font-size: 1rem; }

        /* --- Code Section --- */
        .code-section { background: #050505; border-radius: 60px; margin: 40px 20px; }
        .code-tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 40px; flex-wrap: wrap; }
        .code-tab-btn {
            padding: 0.7rem 1.5rem; background: transparent;
            border: 1px solid var(--border); color: var(--secondary);
            border-radius: 12px; cursor: pointer; transition: 0.3s; font-size: 0.9rem;
        }
        .code-tab-btn.active { background: #fff; color: #000; }

        .code-window {
            background: #1e1e1e; border-radius: 16px; overflow: hidden;
            box-shadow: 0 40px 100px rgba(0,0,0,0.8); max-width: 1000px; margin: 0 auto;
        }
        .code-header {
            background: #2d2d30; padding: 12px 24px;
            display: flex; align-items: center; gap: 20px;
        }
        .dots { display: flex; gap: 8px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; }
        .red { background: #ff5f56; } .yellow { background: #ffbd2e; } .green { background: #27c93f; }
        .filename { color: #999; font-size: 13px; font-family: monospace; }
        .code-body { padding: 32px; overflow-x: auto; }
        .code-body pre { font-family: 'SF Mono', 'Fira Code', monospace; font-size: 14px; line-height: 1.7; }
        .code-panel { display: none; }
        .code-panel.active { display: block; animation: fadeIn 0.4s ease; }

        /* Syntax Highlighting */
        .code-keyword { color: #569cd6; } .code-function { color: #dcdcaa; }
        .code-string { color: #ce9178; } .code-number { color: #b5cea8; }
        .code-comment { color: #6a9955; font-style: italic; } .code-type { color: #4ec9b0; }
        .code-preprocessor { color: #c586c0; } .code-constant { color: #4fc1ff; }

        /* --- Footer --- */
        footer { padding: 80px 20px; text-align: center; border-top: 1px solid var(--border); }
        footer p { margin: 8px 0; color: var(--secondary); font-size: 14px; }
        footer a { color: var(--accent); text-decoration: none; font-weight: 500; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 968px) {
            .hardware-grid { grid-template-columns: 1fr; }
            .card-stack { height: 600px; }
            section { padding: 80px 20px; }
        }
    </style>
</head>
<body>

    <div class="hero">
        <div class="hero-content">
            <h1>Minseok Lim</h1>
            <p class="subtitle">Hardware & Firmware Architect</p>
            <p class="description">
                Designing precision IoT systems with ESP32.<br>
                Building the foundation for intelligent pet feeding.
            </p>
        </div>
        <div class="scroll-indicator"></div>
    </div>

    <section id="architecture">
        <h2 class="section-title">Architecture</h2>
        <p class="section-subtitle">Four pillars of hardware and firmware design</p>

        <div class="card-stack-container">
            <div class="card-selector">
                <button class="active" onclick="showArchCard(0)">Hardware & Wokwi</button>
                <button onclick="showArchCard(1)">Firmware Skeleton</button>
                <button onclick="showArchCard(2)">Hardware Functions</button>
                <button onclick="showArchCard(3)">Data Structures</button>
            </div>

            <div class="card-stack">
                <div class="architecture-card active" data-card="0">
                    <h3>Hardware & Wokwi</h3>
                    <ul>
                        <li>ESP32 diagram.json design and complete pin mapping</li>
                        <li>PlatformIO configuration for library management</li>
                        <li>Wokwi simulation setup for virtual testing environment</li>
                        <li>Pin mapping & electrical connections for all peripherals</li>
                        <li>Breadboard layout optimization for signal integrity</li>
                    </ul>
                </div>

                <div class="architecture-card" data-card="1">
                    <h3>Firmware Skeleton</h3>
                    <ul>
                        <li>Complete setup() initialization sequence for all hardware</li>
                        <li>Main loop architecture with modular function hooks</li>
                        <li>I2C bus initialization for RTC and LCD communication</li>
                        <li>Peripheral initialization (servo, HX711, buttons)</li>
                        <li>Team collaboration framework for parallel development</li>
                    </ul>
                </div>

                <div class="architecture-card" data-card="2">
                    <h3>Hardware Functions</h3>
                    <ul>
                        <li>Weight reading abstraction for simulation and real hardware</li>
                        <li>Servo control functions (open/close feeder mechanism)</li>
                        <li>Button handling with debounce logic</li>
                        <li>System reset procedures and state management</li>
                        <li>Hardware safety mechanisms and error handling</li>
                    </ul>
                </div>

                <div class="architecture-card" data-card="3">
                    <h3>Data Structures</h3>
                    <ul>
                        <li>FeedingSlot struct design for scheduled feeding</li>
                        <li>State management flags (feedingActive, feederOpen)</li>
                        <li>Safety constants (timeout, stuck detection thresholds)</li>
                        <li>Trigger guard system to prevent duplicate activations</li>
                        <li>Unified data interface for team collaboration</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="hardware-section">
        <div class="hardware-content">
            <h2 class="section-title">Hardware Design</h2>
            <p class="section-subtitle">Precision-engineered for stability and efficiency</p>

            <div class="hardware-grid">
                <div class="hardware-image-container">
                    <img src="hardware-diagram.png" alt="Hardware Wiring Diagram" class="hardware-image">
                    <img src="hardware-circuit.png" alt="Circuit Schematic" class="hardware-image">
                </div>

                <div class="feature-explanation">
                    <div class="feature-item">
                        <span class="label">I2C Bus Sharing</span>
                        <h4>Resource Efficiency Through Shared Communication</h4>
                        <p>
                            Designed a shared I2C bus (SDA=21, SCL=22) connecting both RTC and LCD modules. 
                            This architecture maximizes GPIO pin efficiency by controlling multiple peripherals 
                            with just two communication lines, leaving more pins available for sensors and actuators.
                        </p>
                    </div>

                    <div class="feature-item">
                        <span class="label">Power Rail Separation</span>
                        <h4>3.3V / 5V Voltage Isolation for Noise Immunity</h4>
                        <p>
                            Implemented separate power rails: 3.3V for ESP32 logic and 5V for servo motor and LCD. 
                            This separation prevents motor noise from coupling into the sensitive MCU logic, 
                            ensuring stable operation and preventing random resets or data corruption.
                        </p>
                    </div>

                    <div class="feature-item">
                        <span class="label">Precision Measurement</span>
                        <h4>0.1g Accuracy with HX711 Load Cell Amplifier</h4>
                        <p>
                            Integrated HX711 24-bit ADC amplifier for weight measurement. The amplifier converts 
                            micro-volt signals from the load cell into digital values with 0.1g precision through 
                            careful calibration, enabling accurate food portion control.
                        </p>
                    </div>

                    <div class="feature-item">
                        <span class="label">User Interface</span>
                        <h4>Four-Button Layout with Internal Pull-up Resistors</h4>
                        <p>
                            Designed an intuitive 4-button interface using ESP32's internal pull-up resistors, 
                            eliminating external components. Buttons connect directly to ground, reducing wiring 
                            complexity and improving reliability while providing full control capabilities.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <h2 class="section-title">Modular Framework</h2>
        <p class="section-subtitle">Enabling seamless team collaboration through systematic architecture</p>

        <div class="feature-item" style="background: var(--surface); border: 1px solid var(--border); border-left: 4px solid var(--accent);">
            <h3 style="font-size: 1.8rem; color: #fff; margin-bottom: 1.5rem;">What is the Modular Framework?</h3>
            <p style="color: var(--secondary); font-size: 1.1rem; margin-bottom: 1.5rem;">
                The modular framework is a software architecture pattern that divides the firmware into 
                independent, self-contained modules. Each team member can develop their assigned functionality 
                (UI handling, core logic, web API) in isolation, then integrate seamlessly through well-defined 
                interfaces and shared data structures.
            </p>
            <p style="color: var(--secondary); font-size: 1.1rem;">
                This approach eliminated merge conflicts, enabled parallel development, and allowed us to test 
                each component independently before system integration. The skeleton provides clear hooks where 
                each person's code plugs in without affecting others' work.
            </p>
        </div>

        <div class="benefit-grid">
            <div class="benefit-card">
                <span class="tag">Data Integrity</span>
                <h4>Standard Data Structure</h4>
                <p>Defined a unified FeedingSlot structure and consistent state variables that all team members must use. This prevents variable naming conflicts and ensures data integrity across modules.</p>
            </div>
            <div class="benefit-card">
                <span class="tag">Parallel Development</span>
                <h4>Independent Module Development</h4>
                <p>Created clear function boundaries (handleButtons, coreLogicLoop, handleApiLoop) that allow team members to work simultaneously without code conflicts.</p>
            </div>
            <div class="benefit-card">
                <span class="tag">Testing & Validation</span>
                <h4>100% Wokwi Simulation Testbed</h4>
                <p>Built a complete simulation layer that abstracts hardware differences. This allows testing all logic paths in Wokwi before hardware deployment.</p>
            </div>
        </div>

        <img src="modular-architecture.png" alt="Modular Architecture Diagram" class="hardware-image" style="max-width: 900px; display: block; margin: 60px auto 0;">
    </section>

    <section class="code-section">
        <h2 class="section-title">Code Architecture</h2>
        <p class="section-subtitle">Core implementations and hardware abstractions</p>

        <div class="code-tabs">
            <button class="code-tab-btn active" onclick="showCodePanel(0)">Pin Definitions</button>
            <button class="code-tab-btn" onclick="showCodePanel(1)">Data Structures</button>
            <button class="code-tab-btn" onclick="showCodePanel(2)">Weight Reading</button>
            <button class="code-tab-btn" onclick="showCodePanel(3)">Feeder Control</button>
            <button class="code-tab-btn" onclick="showCodePanel(4)">Setup Function</button>
        </div>

        <div class="code-display">
            <div class="code-panel active" data-panel="0">
                <div class="code-window">
                    <div class="code-header">
                        <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                        <span class="filename">main.cpp - Hardware Pins</span>
                    </div>
                    <div class="code-body">
<pre><code><span class="code-comment">// ---- Pin Definitions ----</span>
<span class="code-preprocessor">#define</span> <span class="code-constant">HX711_DT_PIN</span>    4
<span class="code-preprocessor">#define</span> <span class="code-constant">HX711_SCK_PIN</span>   5
<span class="code-preprocessor">#define</span> <span class="code-constant">SERVO_PIN</span>       18
<span class="code-preprocessor">#define</span> <span class="code-constant">BUTTON_DISPLAY</span> 12
<span class="code-preprocessor">#define</span> <span class="code-constant">BUTTON_SETTING</span> 13
<span class="code-preprocessor">#define</span> <span class="code-constant">BUTTON_UP</span>      14
<span class="code-preprocessor">#define</span> <span class="code-constant">BUTTON_DOWN</span>    15

<span class="code-type">RTC_DS1307</span> rtc;
<span class="code-type">LiquidCrystal_I2C</span> lcd(0x27, 20, 4);
<span class="code-type">Servo</span> feedServo;
<span class="code-type">HX711</span> scale;</code></pre>
                    </div>
                </div>
            </div>

            <div class="code-panel" data-panel="1">
                <p style="text-align:center; color:var(--secondary); margin-bottom:20px;">Defines the core data structures for feeding schedules and system state management.</p>
                <div class="code-window">
                    <div class="code-header">
                        <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                        <span class="filename">main.cpp - Data Structures</span>
                    </div>
                    <div class="code-body">
<pre><code><span class="code-keyword">struct</span> <span class="code-type">FeedingSlot</span> {
  <span class="code-type">bool</span>   active;
  <span class="code-type">int</span>    hour;
  <span class="code-type">int</span>    minute;
  <span class="code-type">float</span> weight;
};

<span class="code-type">FeedingSlot</span> slots[3] = {
  {<span class="code-keyword">false</span>, 8, 0, 0},
  {<span class="code-keyword">false</span>, 12, 0, 0},
  {<span class="code-keyword">false</span>, 18, 0, 0}
};

<span class="code-type">bool</span> feedingActive = <span class="code-keyword">false</span>;
<span class="code-type">bool</span> feederOpen = <span class="code-keyword">false</span>;
<span class="code-type">float</span> currentWeight = 0.0f;
<span class="code-type">float</span> currentTargetWeight = 0;

<span class="code-keyword">const</span> <span class="code-type">unsigned long</span> <span class="code-constant">FEED_TIMEOUT_MS</span> = 15000;
<span class="code-keyword">const</span> <span class="code-type">unsigned long</span> <span class="code-constant">STUCK_WINDOW_MS</span> = 4000;
<span class="code-keyword">const</span> <span class="code-type">float</span> <span class="code-constant">MIN_INCREASE_G</span> = 2.0;</code></pre>
                    </div>
                </div>
            </div>

            <div class="code-panel" data-panel="2">
                <p style="text-align:center; color:var(--secondary); margin-bottom:20px;">Abstracts weight measurement to support both Wokwi simulation and real hardware.</p>
                <div class="code-window">
                    <div class="code-header">
                        <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                        <span class="filename">main.cpp - Weight Reading</span>
                    </div>
                    <div class="code-body">
<pre><code><span class="code-type">float</span> <span class="code-function">readWeight</span>(<span class="code-type">bool</span> feedingActive, <span class="code-type">bool</span> feederOpen) {
<span class="code-preprocessor">#if</span> <span class="code-constant">SIM_FAKE_WEIGHT</span>
  <span class="code-keyword">if</span> (feedingActive && feederOpen) {
    <span class="code-keyword">static</span> <span class="code-type">unsigned long</span> last = 0;
    <span class="code-keyword">if</span> (<span class="code-function">millis</span>() - last > 300) {
      simWeight += 10.0f;
      last = <span class="code-function">millis</span>();
    }
  }
  <span class="code-keyword">return</span> simWeight;
<span class="code-preprocessor">#else</span>
  <span class="code-keyword">return</span> scale.<span class="code-function">get_units</span>(5);
<span class="code-preprocessor">#endif</span>
}</code></pre>
                    </div>
                </div>
            </div>

            <div class="code-panel" data-panel="3">
                <p style="text-align:center; color:var(--secondary); margin-bottom:20px;">Provides hardware control functions for the servo motor that operates the feeder gate.</p>
                <div class="code-window">
                    <div class="code-header">
                        <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                        <span class="filename">main.cpp - Feeder Control</span>
                    </div>
                    <div class="code-body">
<pre><code><span class="code-type">void</span> <span class="code-function">openFeeder</span>() {
  feedServo.<span class="code-function">write</span>(servoOpenAngle);
  feederOpen = <span class="code-keyword">true</span>;
}

<span class="code-type">void</span> <span class="code-function">closeFeeder</span>() {
  feedServo.<span class="code-function">write</span>(servoCloseAngle);
  feederOpen = <span class="code-keyword">false</span>;
}

<span class="code-type">void</span> <span class="code-function">resetSystemState</span>() {
  feedingActive = <span class="code-keyword">false</span>;
  feederOpen = <span class="code-keyword">false</span>;
  manualMode = <span class="code-keyword">false</span>;
  currentTargetWeight = 0;
  currentWeight = 0;
<span class="code-preprocessor">#if</span> <span class="code-constant">SIM_FAKE_WEIGHT</span>
  simWeight = 0.0f;
<span class="code-preprocessor">#else</span>
  scale.<span class="code-function">tare</span>();
<span class="code-preprocessor">#endif</span>
  <span class="code-function">closeFeeder</span>();
  <span class="code-function">updateDisplay</span>();
}</code></pre>
                    </div>
                </div>
            </div>

            <div class="code-panel" data-panel="4">
                <p style="text-align:center; color:var(--secondary); margin-bottom:20px;">Initializes all hardware peripherals in the correct sequence.</p>
                <div class="code-window">
                    <div class="code-header">
                        <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                        <span class="filename">main.cpp - Setup</span>
                    </div>
                    <div class="code-body">
<pre><code><span class="code-type">void</span> <span class="code-function">setup</span>() {
  Serial.<span class="code-function">begin</span>(115200);
  Wire.<span class="code-function">begin</span>(21, 22);
  <span class="code-function">pinMode</span>(BUTTON_DISPLAY, INPUT_PULLUP);
  <span class="code-function">pinMode</span>(BUTTON_SETTING, INPUT_PULLUP);
  lcd.<span class="code-function">init</span>();
  lcd.<span class="code-function">backlight</span>();
  rtc_ok = rtc.<span class="code-function">begin</span>();
  feedServo.<span class="code-function">attach</span>(SERVO_PIN);
  scale.<span class="code-function">begin</span>(HX711_DT_PIN, HX711_SCK_PIN);
  scale.<span class="code-function">set_scale</span>(calibration_factor);
  scale.<span class="code-function">tare</span>();
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <h2 class="section-title">Wokwi Configuration</h2>
        <div class="hardware-grid" style="background:var(--surface); border-radius:40px; padding:60px; margin-top:40px;">
            <div>
                <img src="hardware-circuit.png" alt="Wokwi Circuit" class="hardware-image">
                <p style="text-align: center; margin-top: 1rem; color: var(--secondary);">Complete ESP32 circuit in Wokwi simulator</p>
            </div>
            <div style="display: flex; flex-direction: column; justify-content: space-between;">
                <div class="code-window" style="box-shadow: none; border: 1px solid #333;">
                    <div class="code-body" style="height: 400px; background: #0a0a0a;">
<pre style="font-size: 12px; color: #d4d4d4;"><code>{
  "version": 1,
  "author": "임민석",
  "editor": "wokwi",
  "parts": [
    { "type": "board-esp32-devkit-c-v4", "id": "esp" },
    { "type": "wokwi-hx711", "id": "cell1", "attrs": { "type": "5kg" } },
    { "type": "wokwi-ds1307", "id": "rtc1" },
    { "type": "wokwi-servo", "id": "servo1" },
    { "type": "wokwi-lcd2004", "id": "lcd2", "attrs": { "pins": "i2c" } }
  ],
  "connections": [
    ["esp:3V3", "bb1:tp.1", "red"],
    ["esp:GND", "bb1:tn.1", "black"]
  ]
}</code></pre>
                    </div>
                </div>
                <a href="#" class="download-btn" onclick="downloadJSON(); return false;" style="display:inline-block; padding:1rem 2.5rem; background:var(--accent); color:white; text-decoration:none; border-radius:12px; font-weight:600; text-align:center; margin-top:20px;">Download Complete diagram.json</a>
            </div>
        </div>
    </section>

    <footer>
        <p><strong>Minseok Lim (임민석)</strong> | Student ID: 20011935</p>
        <p>Intelligent Mechatronics Engineering, Sejong University</p>
        <p style="margin-top: 2rem;"><a href="https://github.com/CloudTree-comet" target="_blank">GitHub: CloudTree-comet</a></p>
        <p style="margin-top: 1rem; opacity: 0.5;">IoT Systems Design Course - Team D Pet Feeder Project</p>
    </footer>

    <script>
        function showArchCard(index) {
            const cards = document.querySelectorAll('.architecture-card');
            const buttons = document.querySelectorAll('.card-selector button');
            buttons.forEach((btn, i) => btn.classList.toggle('active', i === index));
            cards.forEach((card, i) => {
                card.classList.remove('active');
                if (i === index) card.classList.add('active');
            });
        }

        function showCodePanel(index) {
            const panels = document.querySelectorAll('.code-panel');
            const buttons = document.querySelectorAll('.code-tab-btn');
            buttons.forEach((btn, i) => btn.classList.toggle('active', i === index));
            panels.forEach((panel, i) => panel.classList.toggle('active', i === index));
        }

        function downloadJSON() {
            const jsonData = {
                "version": 1,
                "author": "임민석",
                "editor": "wokwi",
                "parts": [
                    { "type": "wokwi-breadboard-half", "id": "bb1", "top": 35.4, "left": -45.2, "attrs": {} },
                    { "type": "board-esp32-devkit-c-v4", "id": "esp", "top": 19.2, "left": -158.36, "attrs": {} },
                    { "type": "wokwi-hx711", "id": "cell1", "top": -74.2, "left": -45.4, "attrs": { "type": "5kg" } },
                    { "type": "wokwi-ds1307", "id": "rtc1", "top": -63, "left": 172.9, "attrs": {} },
                    { "type": "wokwi-servo", "id": "servo1", "top": 122.8, "left": 297.6, "attrs": {} },
                    { "type": "wokwi-lcd2004", "id": "lcd2", "top": -60.8, "left": 293.6, "attrs": { "pins": "i2c" } },
                    { "type": "wokwi-pushbutton", "id": "btn1", "top": 246.2, "left": 316.8, "attrs": { "color": "red", "xray": "1" } },
                    { "type": "wokwi-pushbutton", "id": "btn2", "top": 207.8, "left": 393.6, "attrs": { "color": "blue", "xray": "1" } },
                    { "type": "wokwi-pushbutton", "id": "btn3", "top": 284.6, "left": 393.6, "attrs": { "color": "blue", "xray": "1" } },
                    { "type": "wokwi-pushbutton", "id": "btn4", "top": 246.2, "left": 480, "attrs": { "color": "green", "xray": "1" } }
                ],
                "connections": [
                    [ "esp:TX", "$serialMonitor:RX", "", [] ],
                    [ "esp:RX", "$serialMonitor:TX", "", [] ],
                    [ "esp:3V3", "bb1:tp.1", "red", [ "v-38.4", "h142.55" ] ],
                    [ "esp:GND.2", "bb1:tn.1", "black", [ "h19.2", "v9.7" ] ],
                    [ "esp:GND.1", "bb1:bn.1", "black", [ "h0" ] ],
                    [ "cell1:VCC", "bb1:tp.3", "red", [ "h0" ] ],
                    [ "cell1:GND", "bb1:tn.4", "black", [ "h57.6", "v105.3" ] ],
                    [ "cell1:SCK", "esp:5", "green", [ "h-134.4", "v162.4" ] ],
                    [ "cell1:DT", "esp:4", "blue", [ "h-144", "v181.9", "h124.8" ] ],
                    [ "rtc1:SDA", "bb1:18t.c", "blue", [ "h-57.6", "v134.1" ] ],
                    [ "rtc1:SCL", "bb1:19t.c", "green", [ "h-48", "v124.6" ] ],
                    [ "bb1:18t.a", "esp:21", "blue", [ "h-96", "v9.6" ] ],
                    [ "esp:22", "bb1:19t.a", "green", [ "h0" ] ],
                    [ "servo1:PWM", "esp:18", "orange", [ "v-28.6", "h-326.4", "v-9.6" ] ],
                    [ "bb1:18t.d", "lcd2:SDA", "blue", [ "h67.2", "v-124.8", "h96" ] ],
                    [ "lcd2:SCL", "bb1:19t.e", "green", [ "h-86.4", "v125.1" ] ],
                    [ "bb1:7b.f", "bb1:tn.6", "black", [ "v0" ] ],
                    [ "bb1:28b.h", "bb1:tn.22", "black", [ "h-9.6", "v-115.1" ] ],
                    [ "bb1:16b.h", "bb1:tn.11", "black", [ "v-57.6", "h-20.8" ] ],
                    [ "bb1:23b.h", "bb1:tn.18", "black", [ "v0" ] ],
                    [ "btn1:2.l", "bb1:tn.2", "black", [ "h0" ] ],
                    [ "btn1:1.l", "esp:12", "red", [ "h-489.6", "v-96" ] ],
                    [ "btn3:2.l", "bb1:tn.7", "black", [ "h-336", "v-259" ] ],
                    [ "btn2:2.l", "bb1:tn.8", "black", [ "h0" ] ],
                    [ "btn2:1.l", "esp:14", "blue", [ "h-576", "v-67.2" ] ],
                    [ "btn3:1.l", "esp:15", "blue", [ "h-441.6", "v-105.6" ] ],
                    [ "btn4:2.l", "bb1:tn.9", "black", [ "h0" ] ],
                    [ "btn4:1.l", "esp:13", "green", [ "h-643.2", "v-76.8" ] ],
                    [ "esp:5V", "bb1:bp.3", "red", [ "h0.15", "v28.8", "h163.2" ] ],
                    [ "rtc1:5V", "bb1:bp.16", "red", [ "h0" ] ],
                    [ "rtc1:GND", "bb1:bn.16", "black", [ "h0" ] ],
                    [ "lcd2:GND", "bb1:bn.20", "black", [ "h0" ] ],
                    [ "lcd2:VCC", "bb1:bp.19", "red", [ "h0" ] ],
                    [ "servo1:V+", "bb1:bp.22", "red", [ "h0" ] ],
                    [ "servo1:GND", "bb1:bn.23", "black", [ "h0" ] ]
                ],
                "dependencies": {}
            };
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(jsonData, null, 2));
            const dlAnchor = document.createElement('a');
            dlAnchor.setAttribute("href", dataStr);
            dlAnchor.setAttribute("download", "diagram.json");
            document.body.appendChild(dlAnchor);
            dlAnchor.click();
            dlAnchor.remove();
        }
    </script>
</body>
</html>
